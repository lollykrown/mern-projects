{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/sayconfirmproductionsltd/Documents/GitHub/mern-projects/frontend/src/components/Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport styled from \"styled-components\";\nimport useInput from \"../hooks/useInput\";\nimport { UserContext } from \"../context/UserContext\";\nimport logo from \"../assets/logo.png\";\nimport axios from 'axios';\nimport Axios from '../utils/axios';\nimport Loader from \"./Loader\";\nexport const FormWrapper = styled.div`\n  background-color: ${props => props.theme.white};\n  padding: 1rem;\n  width: 350px;\n  border: 1px solid ${props => props.theme.borderColor};\n  margin: 6rem auto;\n  text-align: center;\n  padding: 2rem 0;\n\n  img {\n    margin-bottom: 1.5rem;\n  }\n\n  input {\n    display: block;\n    margin: 0 auto;\n    margin-bottom: 1rem;\n    padding: 0.5rem 1.2rem;\n    background: ${props => props.theme.white};\n    border: 1px solid ${props => props.theme.borderColor};\n    font-family: \"Fira Sans\", sans-serif;\n    font-size: 1rem;\n    border-radius: 4px;\n    width: 85%;\n  }\n\n  input[type=\"submit\"] {\n    background-color: ${props => props.theme.blue};\n    color: ${props => props.theme.white};\n    border: 1px solid ${props => props.theme.blue};\n    cursor: pointer;\n  }\n\n  p {\n    margin-top: 2rem;\n  }\n\n  span {\n    color: ${props => props.theme.blue};\n    cursor: pointer;\n  }\n`;\n_c = FormWrapper;\n\nconst Login = props => {\n  _s();\n\n  const CancelToken = axios.CancelToken;\n  const source = CancelToken.source();\n  const {\n    setUser\n  } = useContext(UserContext);\n  const username = useInput(\"\");\n  const password = useInput(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const handleLogin = async e => {\n    e.preventDefault();\n    setLoading(true);\n\n    if (!username.value || !password.value) {\n      return toast.error(\"Please fill in both the fields\");\n    }\n\n    const body = {\n      username: username.value,\n      password: password.value\n    };\n\n    try {\n      const res = await Axios.post('/login', body, {\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        withCredentials: true,\n        cancelToken: source.token\n      });\n\n      if (!res.status) {\n        toast.error(res.data.message);\n        return;\n      }\n\n      localStorage.setItem(\"user\", JSON.stringify(res.data.data));\n      setUser(res.data.data);\n      toast.success(\"Login successful\");\n      setLoading(false);\n    } catch (err) {\n      if (axios.isCancel(err)) {\n        console.log('Get request canceled');\n        toast.error(err.message);\n      } else {\n        console.log(err);\n        toast.error(err.message);\n      }\n    }\n\n    username.setValue(\"\");\n    password.setValue(\"\");\n    return () => {\n      source.cancel('Operation canceled by the user.');\n    };\n  };\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(FormWrapper, {\n    onSubmit: handleLogin,\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      className: \"logo\",\n      src: logo,\n      alt: \"logo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"username\",\n        value: username.value,\n        onChange: username.onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"password\",\n        value: password.value,\n        onChange: password.onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Log In\",\n        className: \"login-btn\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Don't have an account? \", /*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: props.signup,\n          children: \"Sign up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 34\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"Jq0wb7prHDeBHAmTKcsrYdcDAMs=\", false, function () {\n  return [useInput, useInput];\n});\n\n_c2 = Login;\nexport default Login;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"FormWrapper\");\n$RefreshReg$(_c2, \"Login\");","map":{"version":3,"sources":["/Users/sayconfirmproductionsltd/Documents/GitHub/mern-projects/frontend/src/components/Login.js"],"names":["React","useContext","useState","toast","styled","useInput","UserContext","logo","axios","Axios","Loader","FormWrapper","div","props","theme","white","borderColor","blue","Login","CancelToken","source","setUser","username","password","loading","setLoading","handleLogin","e","preventDefault","value","error","body","res","post","headers","withCredentials","cancelToken","token","status","data","message","localStorage","setItem","JSON","stringify","success","err","isCancel","console","log","setValue","cancel","onChange","signup"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport styled from \"styled-components\";\nimport useInput from \"../hooks/useInput\";\nimport { UserContext } from \"../context/UserContext\";\nimport logo from \"../assets/logo.png\";\nimport axios from 'axios';\nimport Axios from '../utils/axios'\nimport Loader from \"./Loader\";\n\nexport const FormWrapper = styled.div`\n  background-color: ${(props) => props.theme.white};\n  padding: 1rem;\n  width: 350px;\n  border: 1px solid ${(props) => props.theme.borderColor};\n  margin: 6rem auto;\n  text-align: center;\n  padding: 2rem 0;\n\n  img {\n    margin-bottom: 1.5rem;\n  }\n\n  input {\n    display: block;\n    margin: 0 auto;\n    margin-bottom: 1rem;\n    padding: 0.5rem 1.2rem;\n    background: ${(props) => props.theme.white};\n    border: 1px solid ${(props) => props.theme.borderColor};\n    font-family: \"Fira Sans\", sans-serif;\n    font-size: 1rem;\n    border-radius: 4px;\n    width: 85%;\n  }\n\n  input[type=\"submit\"] {\n    background-color: ${(props) => props.theme.blue};\n    color: ${(props) => props.theme.white};\n    border: 1px solid ${(props) => props.theme.blue};\n    cursor: pointer;\n  }\n\n  p {\n    margin-top: 2rem;\n  }\n\n  span {\n    color: ${(props) => props.theme.blue};\n    cursor: pointer;\n  }\n`;\n\nconst Login = (props) => {\n\n  const CancelToken = axios.CancelToken;\n  const source = CancelToken.source();\n\n  const { setUser } = useContext(UserContext);\n  const username = useInput(\"\");\n  const password = useInput(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n\n    setLoading(true)\n    if (!username.value || !password.value) {\n      return toast.error(\"Please fill in both the fields\");\n    }\n\n    const body = { username: username.value, password: password.value };\n\n    try {\n      const res = await Axios.post('/login', body, {\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        withCredentials: true,\n        cancelToken: source.token\n      })\n\n      if (!res.status) {\n        toast.error(res.data.message)\n        return;\n      }\n      localStorage.setItem(\"user\", JSON.stringify(res.data.data));\n      setUser(res.data.data);\n      toast.success(\"Login successful\");\n      setLoading(false);\n\n    } catch (err) {\n      if (axios.isCancel(err)) {\n        console.log('Get request canceled');\n        toast.error(err.message)\n      } else {\n        console.log(err)\n        toast.error(err.message)\n      }\n    }\n\n    username.setValue(\"\");\n    password.setValue(\"\");\n    return () => {\n      source.cancel('Operation canceled by the user.');\n    };\n  };\n\n  if (loading) {\n    return <Loader />;\n  }\n\n  return (\n    <FormWrapper onSubmit={handleLogin}>\n      <img className=\"logo\" src={logo} alt=\"logo\" />\n      <form>\n        <input\n          type=\"text\"\n          placeholder=\"username\"\n          value={username.value}\n          onChange={username.onChange}\n        />\n        <input\n          type=\"password\"\n          placeholder=\"password\"\n          value={password.value}\n          onChange={password.onChange}\n        />\n        <input type=\"submit\" value=\"Log In\" className=\"login-btn\" />\n      </form>\n\n      <div>\n        <p>\n          Don't have an account? <span onClick={props.signup}>Sign up</span>\n        </p>\n      </div>\n    </FormWrapper>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}