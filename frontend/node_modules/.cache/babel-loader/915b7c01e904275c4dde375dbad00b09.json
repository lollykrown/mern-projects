{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/sayconfirmproductionsltd/Documents/GitHub/mern-projects/frontend/src/components/ProfileForm.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport styled from \"styled-components\";\nimport Button from \"../styles/Button\";\nimport Avatar from \"../styles/Avatar\";\nimport useInput from \"../hooks/useInput\";\nimport { UserContext } from \"../context/UserContext\";\nimport { uploadImage } from \"../utils\";\nimport axios from 'axios';\nimport Axios from '../utils/axios';\nexport const Wrapper = styled.div`\n  padding: 1rem;\n\n  img {\n    cursor: pointer;\n    margin-right: 40px;\n  }\n\n  .input-group {\n    margin-top: 1.5rem;\n  }\n\n  .input-group > label {\n    display: inline-block;\n    width: 100px;\n  }\n\n  input,\n  textarea {\n    padding: 0.4rem 1rem;\n    font-family: \"Fira Sans\", sans-serif;\n    font-size: 1rem;\n    border-radius: 4px;\n    border: 1px solid ${props => props.theme.borderColor};\n    width: 350px;\n  }\n\n  .textarea-group {\n    display: flex;\n  }\n\n  .change-avatar {\n    display: flex;\n  }\n\n  input[id=\"change-avatar\"],\n  input[id=\"change-avatar-link\"] {\n    display: none;\n  }\n\n  span {\n    color: ${props => props.theme.blue};\n    cursor: pointer;\n  }\n\n  button {\n    margin-top: 1.5rem;\n    margin-left: 6.25rem;\n    margin-bottom: 1rem;\n  }\n\n  @media screen and (max-width: 550px) {\n    width: 98%;\n\n    .input-group {\n      display: flex;\n      flex-direction: column;\n    }\n\n    label {\n      padding-bottom: 0.5rem;\n      font-size: 1rem;\n    }\n\n    button {\n      margin-left: 0;\n    }\n  }\n\n  @media screen and (max-width: 430px) {\n    input,\n    textarea {\n      width: 99%;\n    }\n  }\n`;\n_c = Wrapper;\n\nconst ProfileForm = () => {\n  _s();\n\n  const history = useHistory();\n  const {\n    user,\n    setUser\n  } = useContext(UserContext);\n  const [newAvatar, setNewAvatar] = useState(\"\");\n  const fullname = useInput(user.fullname);\n  const username = useInput(user.username);\n  const bio = useInput(user.bio);\n  const website = useInput(user.website);\n  const CancelToken = axios.CancelToken;\n  const source = CancelToken.source();\n\n  const handleRequest = async b => {\n    try {\n      const res = await Axios.put('/users', b, {\n        cancelToken: source.token\n      });\n      setUser(res.data.data);\n      localStorage.setItem(\"user\", JSON.stringify(res.data));\n      history.push(`/${b.username || user.username}`);\n    } catch (err) {\n      if (axios.isCancel(err)) {\n        console.log('Get request canceled');\n        toast.error(err.message);\n      } else {\n        console.log(err);\n        toast.error(err.message);\n      }\n    }\n\n    return () => {\n      source.cancel('Operation canceled by the user.');\n    };\n  };\n\n  const handleImageUpload = e => {\n    if (e.target.files[0]) {\n      uploadImage(e.target.files[0]).then(res => setNewAvatar(res.data.secure_url));\n    }\n  };\n\n  const handleEditProfile = e => {\n    e.preventDefault();\n\n    if (!fullname.value) {\n      return toast.error(\"The name field should not be empty\");\n    }\n\n    if (!username.value) {\n      return toast.error(\"The username field should not be empty\");\n    }\n\n    const body = {\n      fullname: fullname.value,\n      username: username.value,\n      bio: bio.value,\n      website: website.value,\n      avatar: newAvatar || user.avatar\n    };\n    handleRequest(body);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Wrapper, {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleEditProfile,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group change-avatar\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"change-avatar\",\n            children: /*#__PURE__*/_jsxDEV(Avatar, {\n              lg: true,\n              src: newAvatar ? newAvatar : user.avatar,\n              alt: \"avatar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"change-avatar\",\n            accept: \"image/*\",\n            type: \"file\",\n            onChange: handleImageUpload\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"change-avatar-meta\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: user.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"change-avatar-link\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Change Profile Photo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"change-avatar-link\",\n            accept: \"image/*\",\n            type: \"file\",\n            onChange: handleImageUpload\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"bold\",\n          children: \"Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: fullname.value,\n          onChange: fullname.onChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"bold\",\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: username.value,\n          onChange: username.onChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"bold\",\n          children: \"Website\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: website.value,\n          onChange: website.onChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group textarea-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"bold\",\n          children: \"Bio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          cols: \"10\",\n          value: bio.value,\n          onChange: bio.onChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 156,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ProfileForm, \"yy697Da87K7fjlfP3ToWr0mllxk=\", false, function () {\n  return [useHistory, useInput, useInput, useInput, useInput];\n});\n\n_c2 = ProfileForm;\nexport default ProfileForm;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Wrapper\");\n$RefreshReg$(_c2, \"ProfileForm\");","map":{"version":3,"sources":["/Users/sayconfirmproductionsltd/Documents/GitHub/mern-projects/frontend/src/components/ProfileForm.js"],"names":["React","useState","useContext","useHistory","toast","styled","Button","Avatar","useInput","UserContext","uploadImage","axios","Axios","Wrapper","div","props","theme","borderColor","blue","ProfileForm","history","user","setUser","newAvatar","setNewAvatar","fullname","username","bio","website","CancelToken","source","handleRequest","b","res","put","cancelToken","token","data","localStorage","setItem","JSON","stringify","push","err","isCancel","console","log","error","message","cancel","handleImageUpload","e","target","files","then","secure_url","handleEditProfile","preventDefault","value","body","avatar","onChange"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport styled from \"styled-components\";\nimport Button from \"../styles/Button\";\nimport Avatar from \"../styles/Avatar\";\nimport useInput from \"../hooks/useInput\";\nimport { UserContext } from \"../context/UserContext\";\nimport { uploadImage } from \"../utils\";\nimport axios from 'axios';\nimport Axios from '../utils/axios'\n\nexport const Wrapper = styled.div`\n  padding: 1rem;\n\n  img {\n    cursor: pointer;\n    margin-right: 40px;\n  }\n\n  .input-group {\n    margin-top: 1.5rem;\n  }\n\n  .input-group > label {\n    display: inline-block;\n    width: 100px;\n  }\n\n  input,\n  textarea {\n    padding: 0.4rem 1rem;\n    font-family: \"Fira Sans\", sans-serif;\n    font-size: 1rem;\n    border-radius: 4px;\n    border: 1px solid ${(props) => props.theme.borderColor};\n    width: 350px;\n  }\n\n  .textarea-group {\n    display: flex;\n  }\n\n  .change-avatar {\n    display: flex;\n  }\n\n  input[id=\"change-avatar\"],\n  input[id=\"change-avatar-link\"] {\n    display: none;\n  }\n\n  span {\n    color: ${(props) => props.theme.blue};\n    cursor: pointer;\n  }\n\n  button {\n    margin-top: 1.5rem;\n    margin-left: 6.25rem;\n    margin-bottom: 1rem;\n  }\n\n  @media screen and (max-width: 550px) {\n    width: 98%;\n\n    .input-group {\n      display: flex;\n      flex-direction: column;\n    }\n\n    label {\n      padding-bottom: 0.5rem;\n      font-size: 1rem;\n    }\n\n    button {\n      margin-left: 0;\n    }\n  }\n\n  @media screen and (max-width: 430px) {\n    input,\n    textarea {\n      width: 99%;\n    }\n  }\n`;\n\nconst ProfileForm = () => {\n  const history = useHistory();\n  const { user, setUser } = useContext(UserContext);\n  const [newAvatar, setNewAvatar] = useState(\"\");\n\n  const fullname = useInput(user.fullname);\n  const username = useInput(user.username);\n  const bio = useInput(user.bio);\n  const website = useInput(user.website);\n\n  const CancelToken = axios.CancelToken;\n  const source = CancelToken.source();\n\n  const handleRequest = async (b) => {\n    try {\n      const res = await Axios.put('/users', b, {\n        cancelToken: source.token\n      })\n\n      setUser(res.data.data);\n      localStorage.setItem(\"user\", JSON.stringify(res.data));\n      history.push(`/${b.username || user.username}`);\n\n    } catch (err) {\n      if (axios.isCancel(err)) {\n        console.log('Get request canceled');\n        toast.error(err.message)\n      } else {\n        console.log(err)\n        toast.error(err.message)\n      }\n    }\n    return () => {\n      source.cancel('Operation canceled by the user.');\n    };\n  };\n  const handleImageUpload = (e) => {\n    if (e.target.files[0]) {\n      uploadImage(e.target.files[0]).then((res) =>\n        setNewAvatar(res.data.secure_url)\n      );\n    }\n  };\n\n  const handleEditProfile = (e) => {\n    e.preventDefault();\n\n    if (!fullname.value) {\n      return toast.error(\"The name field should not be empty\");\n    }\n\n    if (!username.value) {\n      return toast.error(\"The username field should not be empty\");\n    }\n\n    const body = {\n      fullname: fullname.value,\n      username: username.value,\n      bio: bio.value,\n      website: website.value,\n      avatar: newAvatar || user.avatar,\n    };\n    handleRequest(body)\n  };\n\n  return (\n    <Wrapper>\n      <form onSubmit={handleEditProfile}>\n        <div className=\"input-group change-avatar\">\n          <div>\n            <label htmlFor=\"change-avatar\">\n              <Avatar\n                lg\n                src={newAvatar ? newAvatar : user.avatar}\n                alt=\"avatar\"\n              />\n            </label>\n            <input\n              id=\"change-avatar\"\n              accept=\"image/*\"\n              type=\"file\"\n              onChange={handleImageUpload}\n            />\n          </div>\n          <div className=\"change-avatar-meta\">\n            <h2>{user.username}</h2>\n            <label htmlFor=\"change-avatar-link\">\n              <span>Change Profile Photo</span>\n            </label>\n            <input\n              id=\"change-avatar-link\"\n              accept=\"image/*\"\n              type=\"file\"\n              onChange={handleImageUpload}\n            />\n          </div>\n        </div>\n\n        <div className=\"input-group\">\n          <label className=\"bold\">Name</label>\n          <input\n            type=\"text\"\n            value={fullname.value}\n            onChange={fullname.onChange}\n          />\n        </div>\n\n        <div className=\"input-group\">\n          <label className=\"bold\">Username</label>\n          <input\n            type=\"text\"\n            value={username.value}\n            onChange={username.onChange}\n          />\n        </div>\n\n        <div className=\"input-group\">\n          <label className=\"bold\">Website</label>\n          <input\n            type=\"text\"\n            value={website.value}\n            onChange={website.onChange}\n          />\n        </div>\n\n        <div className=\"input-group textarea-group\">\n          <label className=\"bold\">Bio</label>\n          <textarea\n            cols=\"10\"\n            value={bio.value}\n            onChange={bio.onChange}\n          ></textarea>\n        </div>\n\n        <Button>Submit</Button>\n      </form>\n    </Wrapper>\n  );\n};\n\nexport default ProfileForm;\n"]},"metadata":{},"sourceType":"module"}