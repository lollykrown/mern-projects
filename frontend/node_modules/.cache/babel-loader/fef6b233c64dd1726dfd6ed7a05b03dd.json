{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/sayconfirmproductionsltd/Documents/GitHub/mern-projects/frontend/src/components/Signup.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { toast } from \"react-toastify\";\nimport { FormWrapper } from \"./Login\";\nimport useInput from \"../hooks/useInput\";\nimport logo from \"../assets/logo.png\";\nimport axios from 'axios';\nimport Axios from '../utils/axios';\n\nconst Signup = props => {\n  _s();\n\n  const CancelToken = axios.CancelToken;\n  const source = CancelToken.source();\n  const email = useInput(\"\");\n  const fullname = useInput(\"\");\n  const username = useInput(\"\");\n  const password = useInput(\"\");\n\n  const handleLogin = async e => {\n    e.preventDefault();\n\n    if (!email.value || !password.value || !username.value || !fullname.value) {\n      return toast.error(\"Please fill in all the fields\");\n    }\n\n    if (username.value === \"explore\") {\n      return toast.error(\"The username you entered is not acceptable, try again\");\n    }\n\n    const re = /^[a-z0-9]+$/i;\n\n    if (re.exec(username.value) === null) {\n      return toast.error(\"The username you entered is not acceptable, try again\");\n    }\n\n    const body = {\n      email: email.value,\n      password: password.value,\n      username: username.value,\n      fullname: fullname.value\n    };\n    console.log(body);\n\n    try {\n      const res = await Axios.post('/signup', body, {\n        cancelToken: source.token\n      });\n\n      if (!res.status) {\n        //console.log(res.message)\n        toast.error(res.message || res.data.message);\n        return;\n      }\n\n      res.data.status && toast.info('You have been registered, click on login to sign in');\n    } catch (err) {\n      if (axios.isCancel(e)) {\n        console.log('Get request canceled');\n        toast.error(e.message);\n      } else {\n        console.log(err);\n        toast.error(err.message);\n      }\n    }\n\n    fullname.setValue(\"\");\n    username.setValue(\"\");\n    password.setValue(\"\");\n    email.setValue(\"\");\n    return () => {\n      source.cancel('Operation canceled by the user.');\n    };\n  };\n\n  return /*#__PURE__*/_jsxDEV(FormWrapper, {\n    onSubmit: handleLogin,\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: logo,\n      alt: \"logo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        placeholder: \"Email\",\n        value: email.value,\n        onChange: email.onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Full Name\",\n        value: fullname.value,\n        onChange: fullname.onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Username\",\n        value: username.value,\n        onChange: username.onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Password\",\n        value: password.value,\n        onChange: password.onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Sign up\",\n        className: \"signup-btn\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Already have an account? \", /*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: props.login,\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 36\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Signup, \"MVRGYcxZd8UvrTxtcQ1NlXNGsBU=\", false, function () {\n  return [useInput, useInput, useInput, useInput];\n});\n\n_c = Signup;\nexport default Signup;\n\nvar _c;\n\n$RefreshReg$(_c, \"Signup\");","map":{"version":3,"sources":["/Users/sayconfirmproductionsltd/Documents/GitHub/mern-projects/frontend/src/components/Signup.js"],"names":["React","toast","FormWrapper","useInput","logo","axios","Axios","Signup","props","CancelToken","source","email","fullname","username","password","handleLogin","e","preventDefault","value","error","re","exec","body","console","log","res","post","cancelToken","token","status","message","data","info","err","isCancel","setValue","cancel","onChange","login"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { toast } from \"react-toastify\";\nimport { FormWrapper } from \"./Login\";\nimport useInput from \"../hooks/useInput\";\nimport logo from \"../assets/logo.png\";\nimport axios from 'axios';\nimport Axios from '../utils/axios'\n\nconst Signup = (props) => {\n  const CancelToken = axios.CancelToken;\n  const source = CancelToken.source();\n\n  const email = useInput(\"\");\n  const fullname = useInput(\"\");\n  const username = useInput(\"\");\n  const password = useInput(\"\");\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n\n    if (!email.value || !password.value || !username.value || !fullname.value) {\n      return toast.error(\"Please fill in all the fields\");\n    }\n\n    if (username.value === \"explore\") {\n      return toast.error(\n        \"The username you entered is not acceptable, try again\"\n      );\n    }\n\n    const re = /^[a-z0-9]+$/i;\n    if (re.exec(username.value) === null) {\n      return toast.error(\n        \"The username you entered is not acceptable, try again\"\n      );\n    }\n\n    const body = {\n      email: email.value,\n      password: password.value,\n      username: username.value,\n      fullname: fullname.value,\n    };\n\n    console.log(body)\n    try {\n      const res = await Axios.post('/signup', body, {\n        cancelToken: source.token\n      })\n\n      if (!res.status) {\n        //console.log(res.message)\n        toast.error(res.message || res.data.message)\n        return;\n      }\n      res.data.status && toast.info('You have been registered, click on login to sign in')\n    } catch (err) {\n      if (axios.isCancel(e)) {\n        console.log('Get request canceled');\n        toast.error(e.message)\n      } else {\n        console.log(err)\n        toast.error(err.message)\n      }\n    }\n\n    fullname.setValue(\"\");\n    username.setValue(\"\");\n    password.setValue(\"\");\n    email.setValue(\"\");\n    return () => {\n      source.cancel('Operation canceled by the user.');\n    };\n  };\n\n  return (\n    <FormWrapper onSubmit={handleLogin}>\n      <img src={logo} alt=\"logo\" />\n\n      <form>\n        <input\n          type=\"email\"\n          placeholder=\"Email\"\n          value={email.value}\n          onChange={email.onChange}\n        />\n        <input\n          type=\"text\"\n          placeholder=\"Full Name\"\n          value={fullname.value}\n          onChange={fullname.onChange}\n        />\n        <input\n          type=\"text\"\n          placeholder=\"Username\"\n          value={username.value}\n          onChange={username.onChange}\n        />\n        <input\n          type=\"password\"\n          placeholder=\"Password\"\n          value={password.value}\n          onChange={password.onChange}\n        />\n        <input type=\"submit\" value=\"Sign up\" className=\"signup-btn\" />\n      </form>\n\n      <div>\n        <p>\n          Already have an account? <span onClick={props.login}>Login</span>\n        </p>\n      </div>\n    </FormWrapper>\n  );\n};\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}