{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/sayconfirmproductionsltd/Documents/GitHub/mern-projects/frontend/src/components/DeletePost.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { useHistory } from \"react-router-dom\";\nimport { FeedContext } from \"../context/FeedContext\";\nimport axios from 'axios';\nimport Axios from '../utils/axios';\n\nconst DeletePost = ({\n  postId,\n  closeModal,\n  goToHome\n}) => {\n  _s();\n\n  const {\n    feed,\n    setFeed\n  } = useContext(FeedContext);\n  const history = useHistory();\n  const CancelToken = axios.CancelToken;\n  const source = CancelToken.source();\n\n  const handleRequest = async id => {\n    try {\n      await Axios.delete(`/posts/${id}`, {\n        cancelToken: source.token\n      });\n    } catch (err) {\n      if (axios.isCancel(err)) {\n        console.log(' request canceled');\n        toast.error(err.message);\n      } else {\n        console.log(err);\n        toast.error(err.message);\n      }\n    }\n\n    return () => {\n      source.cancel('Operation canceled by the user.');\n    };\n  };\n\n  const handleDeletePost = () => {\n    closeModal();\n\n    if (goToHome) {\n      history.push(`/`);\n    }\n\n    setFeed(feed.filter(post => post._id !== postId));\n    toast.success(\"Your post has been deleted successfully\");\n    handleRequest(postId);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"span\", {\n    className: \"danger\",\n    onClick: handleDeletePost,\n    children: \"Delete Post\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n\n_s(DeletePost, \"ZVuy0IGpHw1udsqjIdcF90qDvwY=\", false, function () {\n  return [useHistory];\n});\n\n_c = DeletePost;\nexport default DeletePost;\n\nvar _c;\n\n$RefreshReg$(_c, \"DeletePost\");","map":{"version":3,"sources":["/Users/sayconfirmproductionsltd/Documents/GitHub/mern-projects/frontend/src/components/DeletePost.js"],"names":["React","useContext","toast","useHistory","FeedContext","axios","Axios","DeletePost","postId","closeModal","goToHome","feed","setFeed","history","CancelToken","source","handleRequest","id","delete","cancelToken","token","err","isCancel","console","log","error","message","cancel","handleDeletePost","push","filter","post","_id","success"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,WAAT,QAA4B,wBAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;;AAEA,MAAMC,UAAU,GAAG,CAAC;AAAEC,EAAAA,MAAF;AAAUC,EAAAA,UAAV;AAAsBC,EAAAA;AAAtB,CAAD,KAAsC;AAAA;;AACvD,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAoBX,UAAU,CAACG,WAAD,CAApC;AACA,QAAMS,OAAO,GAAGV,UAAU,EAA1B;AACA,QAAMW,WAAW,GAAGT,KAAK,CAACS,WAA1B;AACA,QAAMC,MAAM,GAAGD,WAAW,CAACC,MAAZ,EAAf;;AAEA,QAAMC,aAAa,GAAG,MAAOC,EAAP,IAAc;AAClC,QAAI;AACF,YAAMX,KAAK,CAACY,MAAN,CAAc,UAASD,EAAG,EAA1B,EAA6B;AACjCE,QAAAA,WAAW,EAAEJ,MAAM,CAACK;AADa,OAA7B,CAAN;AAID,KALD,CAKE,OAAOC,GAAP,EAAY;AACZ,UAAIhB,KAAK,CAACiB,QAAN,CAAeD,GAAf,CAAJ,EAAyB;AACvBE,QAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACAtB,QAAAA,KAAK,CAACuB,KAAN,CAAYJ,GAAG,CAACK,OAAhB;AACD,OAHD,MAGO;AACLH,QAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACAnB,QAAAA,KAAK,CAACuB,KAAN,CAAYJ,GAAG,CAACK,OAAhB;AACD;AACF;;AACC,WAAO,MAAM;AACXX,MAAAA,MAAM,CAACY,MAAP,CAAc,iCAAd;AACD,KAFD;AAGH,GAlBD;;AAoBA,QAAMC,gBAAgB,GAAG,MAAM;AAC7BnB,IAAAA,UAAU;;AAEV,QAAIC,QAAJ,EAAc;AACZG,MAAAA,OAAO,CAACgB,IAAR,CAAc,GAAd;AACD;;AAEDjB,IAAAA,OAAO,CAACD,IAAI,CAACmB,MAAL,CAAaC,IAAD,IAAUA,IAAI,CAACC,GAAL,KAAaxB,MAAnC,CAAD,CAAP;AACAN,IAAAA,KAAK,CAAC+B,OAAN,CAAc,yCAAd;AACAjB,IAAAA,aAAa,CAACR,MAAD,CAAb;AACD,GAVD;;AAYA,sBACE;AAAM,IAAA,SAAS,EAAC,QAAhB;AAAyB,IAAA,OAAO,EAAEoB,gBAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAKD,CA3CD;;GAAMrB,U;UAEYJ,U;;;KAFZI,U;AA6CN,eAAeA,UAAf","sourcesContent":["import React, { useContext } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { useHistory } from \"react-router-dom\";\nimport { FeedContext } from \"../context/FeedContext\";\nimport axios from 'axios';\nimport Axios from '../utils/axios'\n\nconst DeletePost = ({ postId, closeModal, goToHome }) => {\n  const { feed, setFeed } = useContext(FeedContext);\n  const history = useHistory();\n  const CancelToken = axios.CancelToken;\n  const source = CancelToken.source();\n  \n  const handleRequest = async (id) => {\n    try {\n      await Axios.delete(`/posts/${id}`, {\n        cancelToken: source.token\n      })\n\n    } catch (err) {\n      if (axios.isCancel(err)) {\n        console.log(' request canceled');\n        toast.error(err.message)\n      } else {\n        console.log(err)\n        toast.error(err.message)\n      }\n    } \n      return () => {\n        source.cancel('Operation canceled by the user.');\n      };\n  }; \n\n  const handleDeletePost = () => {\n    closeModal();\n\n    if (goToHome) {\n      history.push(`/`);\n    }\n\n    setFeed(feed.filter((post) => post._id !== postId));\n    toast.success(\"Your post has been deleted successfully\");\n    handleRequest(postId)\n  };\n\n  return (\n    <span className=\"danger\" onClick={handleDeletePost}>\n      Delete Post\n    </span>\n  );\n};\n\nexport default DeletePost;\n"]},"metadata":{},"sourceType":"module"}