{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/sayconfirmproductionsltd/Documents/GitHub/mern-projects/frontend/src/components/Follow.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport Button from \"../styles/Button\";\nimport { toast } from \"react-toastify\";\nimport axios from 'axios';\nimport Axios from '../utils/axios';\n\nconst Follow = ({\n  nobtn,\n  isFollowing,\n  incFollowers,\n  decFollowers,\n  userId\n}) => {\n  _s();\n\n  const [followingState, setFollowingState] = useState(isFollowing);\n  useEffect(() => setFollowingState(isFollowing), [isFollowing]);\n  const CancelToken = axios.CancelToken;\n  const source = CancelToken.source();\n\n  const handleRequest = async action => {\n    try {\n      const res = await Axios.get(`/users/${userId}/${action}`, {\n        cancelToken: source.token\n      });\n      console.log(res);\n    } catch (err) {\n      if (axios.isCancel(err)) {\n        console.log('Get request canceled');\n        toast.error(err.message);\n      } else {\n        console.log(err);\n        toast.error(err.message);\n      }\n    }\n\n    return () => {\n      source.cancel('Operation canceled by the user.');\n    };\n  };\n\n  const handleFollow = () => {\n    if (followingState) {\n      setFollowingState(false);\n\n      if (decFollowers) {\n        decFollowers();\n      }\n\n      handleRequest('unfollow');\n    } else {\n      setFollowingState(true);\n\n      if (incFollowers) {\n        incFollowers();\n      }\n\n      handleRequest('follow');\n    }\n  };\n\n  if (followingState) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: nobtn ? /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          color: \"#262626\"\n        },\n        className: \"pointer\",\n        onClick: () => handleFollow(),\n        children: \"Following\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => handleFollow(),\n        children: \"Following\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this)\n    }, void 0, false);\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: nobtn ? /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"pointer\",\n        onClick: () => handleFollow(),\n        children: \"Follow\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => handleFollow(),\n        children: \"Follow\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this)\n    }, void 0, false);\n  }\n};\n\n_s(Follow, \"mVZYNI99Zeik+JVgj4d0hmHDD1g=\");\n\n_c = Follow;\nexport default Follow;\n\nvar _c;\n\n$RefreshReg$(_c, \"Follow\");","map":{"version":3,"sources":["/Users/sayconfirmproductionsltd/Documents/GitHub/mern-projects/frontend/src/components/Follow.js"],"names":["React","useEffect","useState","Button","toast","axios","Axios","Follow","nobtn","isFollowing","incFollowers","decFollowers","userId","followingState","setFollowingState","CancelToken","source","handleRequest","action","res","get","cancelToken","token","console","log","err","isCancel","error","message","cancel","handleFollow","color"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;;AAEA,MAAMC,MAAM,GAAG,CAAC;AAAEC,EAAAA,KAAF;AAASC,EAAAA,WAAT;AAAsBC,EAAAA,YAAtB;AAAoCC,EAAAA,YAApC;AAAkDC,EAAAA;AAAlD,CAAD,KAAgE;AAAA;;AAC7E,QAAM,CAACC,cAAD,EAAiBC,iBAAjB,IAAsCZ,QAAQ,CAACO,WAAD,CAApD;AAEAR,EAAAA,SAAS,CAAC,MAAMa,iBAAiB,CAACL,WAAD,CAAxB,EAAuC,CAACA,WAAD,CAAvC,CAAT;AAEA,QAAMM,WAAW,GAAGV,KAAK,CAACU,WAA1B;AACA,QAAMC,MAAM,GAAGD,WAAW,CAACC,MAAZ,EAAf;;AAEA,QAAMC,aAAa,GAAG,MAAOC,MAAP,IAAkB;AACtC,QAAI;AACF,YAAMC,GAAG,GAAG,MAAMb,KAAK,CAACc,GAAN,CAAW,UAASR,MAAO,IAAGM,MAAO,EAArC,EAAwC;AACxDG,QAAAA,WAAW,EAAEL,MAAM,CAACM;AADoC,OAAxC,CAAlB;AAGAC,MAAAA,OAAO,CAACC,GAAR,CAAYL,GAAZ;AACD,KALD,CAKE,OAAOM,GAAP,EAAY;AACZ,UAAIpB,KAAK,CAACqB,QAAN,CAAeD,GAAf,CAAJ,EAAyB;AACvBF,QAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACApB,QAAAA,KAAK,CAACuB,KAAN,CAAYF,GAAG,CAACG,OAAhB;AACD,OAHD,MAGO;AACLL,QAAAA,OAAO,CAACC,GAAR,CAAYC,GAAZ;AACArB,QAAAA,KAAK,CAACuB,KAAN,CAAYF,GAAG,CAACG,OAAhB;AACD;AACF;;AACD,WAAO,MAAM;AACXZ,MAAAA,MAAM,CAACa,MAAP,CAAc,iCAAd;AACD,KAFD;AAGD,GAlBD;;AAoBA,QAAMC,YAAY,GAAG,MAAM;AACzB,QAAIjB,cAAJ,EAAoB;AAClBC,MAAAA,iBAAiB,CAAC,KAAD,CAAjB;;AACA,UAAIH,YAAJ,EAAkB;AAChBA,QAAAA,YAAY;AACb;;AACDM,MAAAA,aAAa,CAAC,UAAD,CAAb;AACD,KAND,MAMO;AACLH,MAAAA,iBAAiB,CAAC,IAAD,CAAjB;;AACA,UAAIJ,YAAJ,EAAkB;AAChBA,QAAAA,YAAY;AACb;;AACDO,MAAAA,aAAa,CAAC,QAAD,CAAb;AACD;AACF,GAdD;;AAgBA,MAAIJ,cAAJ,EAAoB;AAClB,wBACE;AAAA,gBACGL,KAAK,gBACJ;AACE,QAAA,KAAK,EAAE;AAAEuB,UAAAA,KAAK,EAAE;AAAT,SADT;AAEE,QAAA,SAAS,EAAC,SAFZ;AAGE,QAAA,OAAO,EAAE,MAAMD,YAAY,EAH7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADI,gBASJ,QAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,MAAMA,YAAY,EAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAVJ,qBADF;AAeD,GAhBD,MAgBO;AACL,wBACE;AAAA,gBACGtB,KAAK,gBACJ;AAAM,QAAA,SAAS,EAAC,SAAhB;AAA0B,QAAA,OAAO,EAAE,MAAMsB,YAAY,EAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADI,gBAKJ,QAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,MAAMA,YAAY,EAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AANJ,qBADF;AAWD;AACF,CAzED;;GAAMvB,M;;KAAAA,M;AA2EN,eAAeA,MAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Button from \"../styles/Button\";\nimport { toast } from \"react-toastify\";\nimport axios from 'axios';\nimport Axios from '../utils/axios'\n\nconst Follow = ({ nobtn, isFollowing, incFollowers, decFollowers, userId }) => {\n  const [followingState, setFollowingState] = useState(isFollowing);\n\n  useEffect(() => setFollowingState(isFollowing), [isFollowing]);\n\n  const CancelToken = axios.CancelToken;\n  const source = CancelToken.source();\n\n  const handleRequest = async (action) => {\n    try {\n      const res = await Axios.get(`/users/${userId}/${action}`, {\n        cancelToken: source.token\n      })\n      console.log(res)\n    } catch (err) {\n      if (axios.isCancel(err)) {\n        console.log('Get request canceled');\n        toast.error(err.message)\n      } else {\n        console.log(err)\n        toast.error(err.message)\n      }\n    }\n    return () => {\n      source.cancel('Operation canceled by the user.');\n    };\n  };\n\n  const handleFollow = () => {\n    if (followingState) {\n      setFollowingState(false);\n      if (decFollowers) {\n        decFollowers();\n      }\n      handleRequest('unfollow')\n    } else {\n      setFollowingState(true);\n      if (incFollowers) {\n        incFollowers();\n      }\n      handleRequest('follow')\n    }\n  };\n\n  if (followingState) {\n    return (\n      <>\n        {nobtn ? (\n          <span\n            style={{ color: \"#262626\" }}\n            className=\"pointer\"\n            onClick={() => handleFollow()}\n          >\n            Following\n          </span>\n        ) : (\n          <Button onClick={() => handleFollow()}>Following</Button>\n        )}\n      </>\n    );\n  } else {\n    return (\n      <>\n        {nobtn ? (\n          <span className=\"pointer\" onClick={() => handleFollow()}>\n            Follow\n          </span>\n        ) : (\n          <Button onClick={() => handleFollow()}>Follow</Button>\n        )}\n      </>\n    );\n  }\n};\n\nexport default Follow;\n"]},"metadata":{},"sourceType":"module"}