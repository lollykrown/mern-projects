{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/sayconfirmproductionsltd/Documents/GitHub/mern-projects/frontend/src/components/Search.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { useHistory } from \"react-router-dom\";\nimport Avatar from \"../styles/Avatar\";\nimport axios from 'axios';\nimport Axios from '../utils/axios';\nconst InputWrapper = styled.input`\n  padding: 0.4rem 0.6rem;\n  background: ${props => props.theme.bg};\n  border: 1px solid ${props => props.theme.borderColor};\n  font-family: \"Fira Sans\", sans-serif;\n  font-size: 1rem;\n  border-radius: ${props => props.theme.borderRadius};\n`;\n_c = InputWrapper;\nconst SearchWrapper = styled.div`\nbackground-color:#fff;\nwidth: 230px;\ndisplay: flex;\nflex-direction: column;\ntext-align: center;\nposition absolute;\nleft:400px;\ntop:70px;\nheight:300px;\nborder: 1px solid rgba(0,0,0,0.07);\noverflow-x:scroll;\n\n.username, .name{\n  text-align: left;\n  font-size: 0.85rem;\n  line-height: 1;\n}\n.name{\n  color: rgba(0,0,0,0.5);\n}\n.user-info {\n  padding: .5rem .75rem;\n  display: flex;\n  // justify-content: space-around;\n  align-items: center;\n  border-bottom: 1px solid rgba(0,0,0,0.2);\n}\n.user-info:hover{\n  background-color: rgba(0,0,0,0.025);\n}\n`;\n_c2 = SearchWrapper;\n\nconst Search = () => {\n  _s();\n\n  const history = useHistory();\n  const [search, setSearch] = useState('');\n  const [users, setUsers] = useState([]);\n  const [filtered, setFilteredUsers] = useState([]);\n  const CancelToken = axios.CancelToken;\n  const source = CancelToken.source();\n  useEffect(() => {\n    const loadUsers = async () => {\n      try {\n        const res = await Axios.get('/users', {\n          cancelToken: source.token\n        });\n        setUsers(res.data.data);\n      } catch (error) {\n        if (axios.isCancel(error)) {\n          console.log('Request canceled', error.message);\n        } else {\n          throw error;\n        }\n      }\n    };\n\n    loadUsers();\n    return () => {\n      source.cancel('Operation canceled by the user.');\n    };\n  }, []);\n  useEffect(() => {\n    setFilteredUsers(users.filter(m => {\n      return m.username.toLowerCase().includes(search.toLowerCase()) || m.fullname.toLowerCase().includes(search.toLowerCase());\n    }));\n  }, [search, users]);\n\n  const setVal = e => {\n    const value = e.target.value;\n    setSearch(value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(InputWrapper, {\n      type: \"search\",\n      value: search,\n      onChange: e => setVal(e),\n      placeholder: \"Search\",\n      \"aria-label\": \"Search\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), search.length > 0 && filtered.map(u => /*#__PURE__*/_jsxDEV(SearchWrapper, {\n      onClick: () => {\n        history.push(`/${u.username}`);\n        setSearch('');\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-info\",\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          className: \"pointer\",\n          src: u === null || u === void 0 ? void 0 : u.avatar,\n          alt: \"avatar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-meta\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"username\",\n            children: u.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"name\",\n            children: u.fullname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }, this)\n    }, u._id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true);\n};\n\n_s(Search, \"xIuZHD31DFSww6arq8w0zXLmFUQ=\", false, function () {\n  return [useHistory];\n});\n\n_c3 = Search;\nexport default Search;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"InputWrapper\");\n$RefreshReg$(_c2, \"SearchWrapper\");\n$RefreshReg$(_c3, \"Search\");","map":{"version":3,"sources":["/Users/sayconfirmproductionsltd/Documents/GitHub/mern-projects/frontend/src/components/Search.js"],"names":["React","useEffect","useState","styled","useHistory","Avatar","axios","Axios","InputWrapper","input","props","theme","bg","borderColor","borderRadius","SearchWrapper","div","Search","history","search","setSearch","users","setUsers","filtered","setFilteredUsers","CancelToken","source","loadUsers","res","get","cancelToken","token","data","error","isCancel","console","log","message","cancel","filter","m","username","toLowerCase","includes","fullname","setVal","e","value","target","length","map","u","push","avatar","_id"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { useHistory } from \"react-router-dom\";\nimport Avatar from \"../styles/Avatar\";\nimport axios from 'axios';\nimport Axios from '../utils/axios'\n\nconst InputWrapper = styled.input`\n  padding: 0.4rem 0.6rem;\n  background: ${(props) => props.theme.bg};\n  border: 1px solid ${(props) => props.theme.borderColor};\n  font-family: \"Fira Sans\", sans-serif;\n  font-size: 1rem;\n  border-radius: ${(props) => props.theme.borderRadius};\n`;\nconst SearchWrapper = styled.div`\nbackground-color:#fff;\nwidth: 230px;\ndisplay: flex;\nflex-direction: column;\ntext-align: center;\nposition absolute;\nleft:400px;\ntop:70px;\nheight:300px;\nborder: 1px solid rgba(0,0,0,0.07);\noverflow-x:scroll;\n\n.username, .name{\n  text-align: left;\n  font-size: 0.85rem;\n  line-height: 1;\n}\n.name{\n  color: rgba(0,0,0,0.5);\n}\n.user-info {\n  padding: .5rem .75rem;\n  display: flex;\n  // justify-content: space-around;\n  align-items: center;\n  border-bottom: 1px solid rgba(0,0,0,0.2);\n}\n.user-info:hover{\n  background-color: rgba(0,0,0,0.025);\n}\n`;\n\nconst Search = () => {\n  const history = useHistory();\n\n  const [search, setSearch] = useState('')\n  const [users, setUsers] = useState([]);\n  const [filtered, setFilteredUsers] = useState([])\n\n  const CancelToken = axios.CancelToken;\n  const source = CancelToken.source();\n\n  useEffect(() => {\n    const loadUsers = async () => {\n\n      try {\n        const res = await Axios.get('/users', {\n          cancelToken: source.token\n        })\n\n        setUsers(res.data.data);\n\n      } catch (error) {\n        if (axios.isCancel(error)) {\n          console.log('Request canceled', error.message);\n        } else {\n          throw error\n        }\n      }\n    };\n\n    loadUsers()\n    return () => {\n      source.cancel('Operation canceled by the user.');\n    };\n  }, [])\n\n  useEffect(() => {\n    setFilteredUsers(\n      users.filter(m => {\n        return m.username.toLowerCase().includes(search.toLowerCase()) ||\n        m.fullname.toLowerCase().includes(search.toLowerCase()) \n      })\n    )\n  }, [search, users])\n\n  const setVal = (e) => {\n    const value = e.target.value;\n    setSearch(value)\n  }\n\n  return (\n    <>\n      <InputWrapper\n        type=\"search\"\n        value={search}\n        onChange={e => setVal(e)}\n        placeholder=\"Search\"\n        aria-label=\"Search\"\n      />\n      {search.length > 0 && filtered.map((u) => (\n        <SearchWrapper key={u._id} onClick={() => {\n          history.push(`/${u.username}`)\n          setSearch('')\n          }}>\n          <div className=\"user-info\">\n            <Avatar\n              className=\"pointer\"\n              src={u?.avatar}\n              alt=\"avatar\"\n            />\n            <div className=\"user-meta\">\n              <h4 className=\"username\" >\n                {u.username}\n              </h4>\n              <span className=\"name\">{u.fullname}</span>\n            </div>\n          </div>\n        </SearchWrapper>)\n      )}\n    </>\n  );\n};\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}